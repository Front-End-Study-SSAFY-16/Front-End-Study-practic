<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Airbnb Clone</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100">
    <nav class="flex items-center justify-between px-6 bg-white shadow-md">
      <div>
        <img
          src="https://www.logo.wine/a/logo/Airbnb/Airbnb-Logo.wine.svg"
          alt="Airbnb Logo"
          class="w-36"
        />
      </div>
      <div class="flex items-center space-x-6">
        <button class="text-lg">ğŸŒ™</button>
        <button class="text-lg bg-green-500 text-white px-3 py-1 rounded-full">
          ì´
        </button>
      </div>
    </nav>

    <div
      id="listings-container"
      class="max-w-7xl mx-auto p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"
    ></div>
    <div id="load-more" class="w-full h-12"></div>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    const container = document.getElementById("listings-container");
    let data = []; // JSON ë°ì´í„°ë¥¼ ë‹´ì„ ë°°ì—´
    let currentIndex = 0;
    const itemsPerPage = 10; // í•œ ë²ˆì— ë¡œë“œí•  ì•„ì´í…œ ìˆ˜

    // JSON ë°ì´í„°ë¥¼ axiosë¡œ ê°€ì ¸ì˜¤ê¸°
    async function fetchData() {
      const response = await axios.get("list.json"); // ì‹¤ì œ JSON íŒŒì¼ ê²½ë¡œë¡œ ë³€ê²½
      data = response.data;
      loadMoreItems(); // ì²˜ìŒ ë°ì´í„°ë¥¼ ë¡œë“œ
    }

    // ë°ì´í„° ë¡œë“œ í•¨ìˆ˜
    function loadMoreItems() {
      const endIndex = currentIndex + itemsPerPage;
      const itemsToLoad = data.slice(currentIndex, endIndex);

      itemsToLoad.forEach((item) => {
        const itemHTML = `
        <div class="bg-white shadow-md rounded-lg overflow-hidden">
          <img src="${item.image}" alt="${item.name}" class="w-full h-48 object-cover" />
          <div class="p-4">
            <div class="flex justify-between items-center">
              <h3 class="text-lg font-bold">${item.name}</h3>
              <div class="flex items-center">
                <span class="text-sm text-gray-500">â˜…</span>
                <span class="text-sm ml-1">${item.rating}</span>
              </div>
            </div>
            <p class="text-gray-500">${item.location}</p>
            <p class="text-lg font-semibold">${item.price}</p>
          </div>
        </div>`;
        container.insertAdjacentHTML("beforeend", itemHTML);
      });

      currentIndex += itemsPerPage; // ë‹¤ìŒ ë¡œë“œ ì‹œì‘ ì¸ë±ìŠ¤ ì—…ë°ì´íŠ¸
    }

    // Intersection Observer ì„¤ì •
    const observer = new IntersectionObserver(
      (entries) => {
        if (entries[0].isIntersecting) {
          loadMoreItems();
        }
      },
      {
        rootMargin: "0px 0px 100px 0px", // í•˜ë‹¨ ì—¬ìœ  ê³µê°„ì„ ì„¤ì •
      }
    );

    // ë¡œë“œ ëŒ€ìƒ ìš”ì†Œë¥¼ ê´€ì°°
    observer.observe(document.getElementById("load-more"));

    // ì´ˆê¸° ë°ì´í„° fetch
    fetchData();
  </script>
</html>
